version: 1

AppDir:
  path: ./AppDir

  app_info:
    id: net.lex-root
    name: lexet
    icon: lex
    # icon: accessories-calculator
    # icon: utilities-terminal
    version: latest
    exec: bin/bash
    exec_args: $@

  apt:
    arch: amd64
    sources:
      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ focal main restricted universe multiverse'
        key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x3b4fe6acc0b21f32'
      - sourceline: 'deb-src http://archive.ubuntu.com/ubuntu/ focal main restricted universe multiverse'

      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ focal-updates main restricted universe multiverse'
      - sourceline: 'deb-src http://archive.ubuntu.com/ubuntu/ focal-updates main restricted universe multiverse'

      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse'
      - sourceline: 'deb-src http://archive.ubuntu.com/ubuntu/ focal-security main restricted universe multiverse'
      # for atom
      - sourceline: 'deb https://packagecloud.io/AtomEditor/atom/any/ any main'
        key_url: 'https://packagecloud.io/AtomEditor/atom/gpgkey'
      #
      # - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ focal-backports main restricted universe multiverse'
      # - sourceline: 'deb-src http://archive.ubuntu.com/ubuntu/ focal-backports main restricted universe multiverse'
      #
      # - sourceline: 'deb http://archive.canonical.com/ubuntu focal partner'
      # - sourceline: 'deb-src http://archive.canonical.com/ubuntu focal partner'
      # - sourceline: 'deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ bionic main restricted universe multiverse'
      #   key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x3b4fe6acc0b21f32'
      # - sourceline: 'deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ bionic-updates main restricted universe multiverse'
      # - sourceline: 'deb [arch=amd64] http://archive.ubuntu.com/ubuntu/ bionic-backports main restricted universe multiverse'

    include:
      - libegl1
      - bash
      - coreutils
      - perl
      - make
      - zsh

      - python
      - python3-venv
      - python3-pip
      - python3
      - python3-dev
      - pylint3
      - pylint3


      # old
      - libxcb-dri2-0
      - libxcb-dri3-0
      - libglapi-mesa
      - libxcb-present0
      - libxcb-sync1
      - libxcb-xfixes0
      - libxshmfence1
      - libegl-mesa0
      - libexpat1
      - libegl1
      - libgtk-3-0
      - build-essential
      - libsm6
      - libasound2
      - libgl1
      - libgnutls30
      - libsqlite3-dev
      - libbz2-dev
      - libssl-dev
      - zlib1g-dev
      - uuid-dev
      - libgdbm-dev
      - libncurses5-dev

      - git
      - rhino

      # atom requirements
      # - libasound2
      - libcurl4
      - libgbm1
      - libgcrypt20
      # - libgtk-3-0
      - libnotify4
      - libnss3
      - libglib2.0-bin
      # - xdg-utils
      # - libx11-xcb1
      # - libxcb-dri3-0
      - libxss1
      - libxtst6
      - libxkbfile1
      - atom
      # - kcalc

      #
      # # Full bundle requirements
      # - libx11-6
      # - libglapi-mesa
      # - libdrm2
      # - libxcb-shape0
      # - libxcb1
      # - libx11-xcb1
      # - fontconfig-config
      # - libfontconfig1
      # - libfreetype6
      # - libglx0
      # - libxcb-xfixes0
      # - libxcb-render0
      # - libxcb-glx0
      # - libxcb-shm0
      # - libglvnd0

    # exclude:
    #   - phonon4qt5
    #   - libkf5service-bin
    #   - perl
    #   - perl-base
    #   - libpam-runtime

  # files:
  #   exclude:
  #     - usr/lib/x86_64-linux-gnu/gconv
  #     - usr/share/man
  #     - usr/share/doc/*/README.*
  #     - usr/share/doc/*/changelog.*
  #     - usr/share/doc/*/NEWS.*
  #     - usr/share/doc/*/TODO.*
  runtime:
    env:
      APPDIR_LIBRARY_PATH: $APPDIR/lib/x86_64-linux-gnu:$APPDIR/usr/lib/x86_64-linux-gnu:$APPDIR/lib/systemd
      LEXET_MOUNT_POINT: "$APPDIR"
      LEXET_PATH: "$APPDIR/lexet"
      LEXET_PATH: "$APPDIR/lexet"
      LEXET_CONFIGS: "$APPDIR/config"
      ATOM_HOME: '$HOME/.appimage_atom'

  # test:
  #   duse_host_x: Trueebian:
  #     image: appimagecrafters/tests-env:debian-stable
  #     command: "./AppRun"
  #     use_host_x: True
  #   centos:
  #     image: appimagecrafters/tests-env:centos-7
  #     command: "./AppRun"
  #     use_host_x: True
  #   arch:
  #     image: appimagecrafters/tests-env:archlinux-latest
  #     command: "./AppRun"
  #     use_host_x: True
  #   fedora:
  #     image: appimagecrafters/tests-env:fedora-30
  #     command: "./AppRun"
  #     use_host_x: True
  #   ubuntu:
  #     image: appimagecrafters/tests-env:ubuntu-xenial
  #     command: "./AppRun"
  #     use_host_x: True


AppImage:
  update-information: None
  sign-key: None
  arch: x86_64
